<!DOCTYPE html>
<html data-theme="light" lang="en">
  <head>
    <%- include('./partials/head.ejs'); %>

    <title>Register | DonateLife</title>
  </head>
  <body
    class="bg-red-100 flex items-center justify-start min-h-screen"
    style="
      background-image: url('/pics/login.png');
      background-size: cover;
      background-position: center;
    "
  >
    <div class="container mx-auto">
      <form
        method="POST"
        action="/register"
        class="bg-white/20 backdrop-blur-sm shadow-lg rounded-xl px-8 py-10 w-full max-w-sm"
      >
        <h1 class="text-3xl font-bold text-center text-red-600 mb-6">
          Register
        </h1>

        <label class="form-control w-full mb-4">
          <span class="label-text font-semibold">Username</span>
          <input
            type="text"
            name="username"
            required
            class="input input-bordered w-full"
            pattern="^[a-zA-Z0-9][a-zA-Z0-9_\-]{2,13}[a-zA-Z0-9]$"
          />
        </label>

        <label class="form-control w-full mb-4">
          <span class="label-text font-semibold">Email</span>
          <input
            type="email"
            name="email"
            required
            class="input input-bordered w-full"
            pattern="^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$"
          />
        </label>

        <label class="form-control w-full mb-6">
          <span class="label-text font-semibold"
            >Password (At least 8 characters)</span
          >
          <input
            id="password"
            type="password"
            name="password"
            required
            class="input input-bordered w-full"
            pattern="^.{8}$"
          />
        </label>

        <label class="form-control w-full mb-6">
          <span class="label-text font-semibold">Confirm Password</span>
          <input
            id="confirmPassword"
            type="password"
            name="confirmPassword"
            required
            class="input input-bordered w-full"
            pattern="^.{8}$"
          />
        </label>

        <select name="role" required class="select select-bordered w-full mb-6">
          <option value="">Select Role</option>
          <option value="recipient">Recipient</option>
          <option value="donor">Donor</option>
        </select>
        <p id="errorMessage" class="text-red-500"><%= error %></p>
        <button
          id="submitter"
          type="submit"
          class="btn btn-primary w-full bg-red-600 hover:bg-red-700 border-none"
        >
          Register
        </button>

        <p class="text-center mt-4 text-sm text-gray-600">
          Already have an account?
          <a href="/login" class="text-red-600 font-medium hover:underline"
            >Login</a
          >
        </p>

        <p class="text-center mt-4 text-sm text-gray-600">
          <a
            href="/register/hospital"
            class="text-red-600 font-medium hover:underline"
            >Register</a
          >
          as a hospital
        </p>
      </form>
    </div>
    <!-- <script>
      const form = document.getElementById("registerForm");

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        const password = document.getElementById("password").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;
        const errorMessageField = document.getElementById("errorMessage");
        const submitter = document.getElementById("submitter");
        const formData = new FormData(form, submitter);
        const data = {};

        formData.forEach((value, key) => {
          data[key] = value;
        });

        console.log(data);

        if (password === confirmPassword) {
          fetch("/register", {
            method: "POST", // Use POST for form submissions
            headers: {
              "Content-Type": "application/json", // Specify JSON content type
            },
            body: JSON.stringify(data), // Convert the data object to JSON
          })
            .then((response) => response.json()) // Parse the JSON response from the backend
            .then((data) => {
              console.log("Success:", data); // Handle the response from the backend
            })
            .catch((error) => {
              console.error("Error:", error); // Handle any errors
            });
        } else {
          errorMessageField.innerText = "Passwords do not match.";
        }
      }); 
    </script> -->
  </body>
</html>
